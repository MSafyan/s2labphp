<!-- 
FA18-BSE-080 M SAFYAN 
https://github.com/MSafyan/s2labphp
https://s2safyanlab.herokuapp.com/ 

-->

<!DOCTYPE html>
<html>
<head>
  <title>JQuery Exercise</title>
      <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="styles.css">
  

</head >
<body>
<div class="container" style="margin-top: 10rem;">
  <div class="row">
    <div class="col-6 ctable">
      <label>List of persons</label>
      <div class="form-group">
        <label for=title>
          Title
        </label>
        <input type="text"
        class="form-control"
        name="title"
        id="title"
        placeholder="enter email"
        />
      <div class="form-group">
        <label for=body>
          Body
        </label>
        <input type="text"
        class="form-control"
        name="body"
        id="body"
        placeholder="enter email"
        />
        <button id='addBtn' class="btn btn-info">add recipes</button>
      </div>
      <div id="users"></div>
    
      <table id='table' class="table table-bordered data-table">
        <thead>
          <th>Name</th>
          <th>Email</th>
        
          <th>Action</th>
        </thead>
        <tbody id="tbody" class="tbody">
    
        </tbody>
      </table>
    </div>
  </div>
</div>
    




   <script type="text/javascript">
   loaddata();

   $("#users").on('click','.btn-danger',handleDelete);
   $('#addBtn').click(addRecipe);
function addRecipe(title,body){
  var title=$('#title').val();
  var body=$('#body').val();
        $.ajax({
    url: 'https://jsonplaceholder.typicode.com/recipes',
    method: 'POST',
    data:{title,body},
    success: function (response) {
      loaddata();
    }
  });
}
   function handleDelete(id){
     var btn=$(this);
     var parentDiv=btn.closest('.user');
     let idu=parentDiv.attr('data-id')

      $.ajax({
       url: 'https://jsonplaceholder.typicode.com/users',
       method: 'DELETE',
       success:function(){
         loaddata();
       }
      });

     console.log(idu)
     console.log('delete')
   }
   function loaddata(){
     $.ajax({
       url:'https://jsonplaceholder.typicode.com/users',
       method:'GET',
       success:function(response){
         console.log(response);
         var users=$('#users');
         users.empty();
         for(var i=0;i<response.length;i++){
           users.append(`<a href='album'><div data-id="${response[i].id}"class='user'><h3>${response[i].username}</h3><p>${response[i].email}<button id='edit' type='button' class='btn-success'> edit <button>
            <button id='delete' type='button' class='btn-danger'> delte<button>
            </p></div><a>`)
         }
       }
     })
   }

    </script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
     <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
     <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>


